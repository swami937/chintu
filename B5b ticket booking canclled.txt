#include <iostream>
#include <cstdlib> 
using namespace std;

struct Node {
    int seatNo;
    bool booked;      
    Node* next;
    Node* prev;
};

class Cinemax {
    Node* head[10];    
public:
    Cinemax() {
        for (int i = 0; i < 10; i++)
            head[i] = NULL;
        createSeats();
    }

   
    void createSeats() {
        for (int i = 0; i < 10; i++) {
            Node* prev = NULL;
            for (int j = 1; j <= 7; j++) {
                Node* newNode = new Node;
                newNode->seatNo = j;
                newNode->booked = (rand() % 2); 
                newNode->next = NULL;
                newNode->prev = prev;

                if (prev)
                    prev->next = newNode;
                else
                    head[i] = newNode;

                prev = newNode;
            }
        }
    }

    
void displayBooked() {
        cout << "\nBooked Seats (Row : Seat Numbers)\n";
        for (int i = 0; i < 10; i++) {
            cout << "Row " << (i + 1) << " : ";
            Node* temp = head[i];
            bool any = false;
            while (temp) {
                if (temp->booked) {
                    cout << temp->seatNo << " ";
                    any = true;
                }
                temp = temp->next;
            }
            if (!any) cout << "None";
            cout << endl;
        }
    }

   
    void cancelBooking(int row, int seatNo) {
        row--; // convert to 0-index
        if (row < 0 || row >= 10 || seatNo < 1 || seatNo > 7) {
            cout << "Invalid row or seat number!\n";
            return;
        }

        Node* temp = head[row];
        while (temp && temp->seatNo != seatNo)
            temp = temp->next;

        if (!temp) {
            cout << "Seat not found!\n";
            return;
        }

        if (!temp->booked) {
            cout << "Seat " << seatNo << " in Row " << row + 1 << " is not booked.\n";
            return;
        }

        temp->booked = false;
        cout << "Booking for Seat " << seatNo << " in Row " << row + 1 << " cancelled successfully!\n";
    }
};

int main() {
    Cinemax cinema;
    int choice;

    do {
        cout << "\n--- CINEMAX TICKET SYSTEM ---\n";
        cout << "1. Show Booked Seats\n";
        cout << "2. Cancel Booking\n";
        cout << "3. Exit\n";
        cout << "Enter your choice: ";
        cin >> choice;

        switch (choice) {
            case 1:
                cinema.displayBooked();
                break;
            case 2: {
                int row, seat;
                cout << "Enter Row (1-10): ";
                cin >> row;
                cout << "Enter Seat Number (1-7): ";
                cin >> seat;
                cinema.cancelBooking(row, seat);
                break;
            }
            case 3:
                cout << "Thank you for visiting Cinemax!\n";
                break;
            default:
                cout << "Invalid choice!\n";
        }
    } while (choice != 3);

    return 0;

}

âš™ï¸ Main Logic Overview
ðŸ§± Structure: Node

Each seat is represented as a node in a doubly linked list.
It contains:

seatNo â†’ Seat number (1â€“7)

booked â†’ true if booked, else false

next & prev â†’ Links to next and previous seat

ðŸŽžï¸ Class: Cinemax

head[10] â†’ Array of 10 pointers (each row = 1 linked list).

Handles creation, display, and cancellation.

ðŸ”§ Functions
1. createSeats()

Creates 10 rows, each with 7 seats.

Each seat gets a random booked/unbooked status using rand() % 2.

Seats are connected both forward and backward â†’ doubly linked list.

2. displayBooked()

Shows all booked seats row-wise.

If a row has no booked seats â†’ prints "None".

3. cancelBooking(int row, int seatNo)

Checks for valid seat and row numbers.

Finds the specific seat node.

If already booked â†’ marks it as false (cancelled).

Prints success or error message accordingly.

ðŸ–¥ï¸ main() Function

Creates a Cinemax object â†’ seats auto-created.

Displays a menu:

1ï¸âƒ£ Show Booked Seats

2ï¸âƒ£ Cancel Booking

3ï¸âƒ£ Exit

Performs user-selected operations until they choose Exit.

â±ï¸ Time Complexity
Operation	Complexity
Create Seats	O(10Ã—7) = O(1)
Display Booked	O(10Ã—7) = O(1)
Cancel Booking	O(7) per row = O(1)
