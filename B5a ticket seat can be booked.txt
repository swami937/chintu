#include <iostream>
using namespace std;

struct Node {
    int seatNo;
    Node* next;
    Node* prev;
};

class Cinemax {
    Node* head[10]; 
public:
    Cinemax() {
        for (int i = 0; i < 10; i++)
            head[i] = NULL;
        createSeats();
    }

   
    void createSeats() {
        for (int i = 0; i < 10; i++) {
            Node* prevNode = NULL;
            for (int j = 1; j <= 7; j++) {
                Node* newNode = new Node;
                newNode->seatNo = j;
                newNode->next = NULL;
                newNode->prev = prevNode;

                if (prevNode)
                    prevNode->next = newNode;
                else
                    head[i] = newNode;

                prevNode = newNode;
            }
        }
    }

  
    void initialBooking() {
        cout << "\nSome random seats booked initially.\n";
        bookSeat(1, 3);
        bookSeat(2, 5);
        bookSeat(4, 2);
        bookSeat(7, 6);
    }

   
    void displaySeats() {
        cout << "\nAvailable Seats (Row : Seat Numbers):\n";
        for (int i = 0; i < 10; i++) {
            cout << "Row " << (i + 1) << " : ";
            Node* temp = head[i];
            if (temp == NULL)
                cout << "No seats available";
            else {
                while (temp != NULL) {
                    cout << temp->seatNo << " ";
                    temp = temp->next;
                }
            }
            cout << endl;
        }
    }

   
    void bookSeat(int row, int seatNo) {
        row--; // convert to 0-index
        Node* temp = head[row];

        while (temp != NULL && temp->seatNo != seatNo)
            temp = temp->next;

        if (temp == NULL) {
            cout << "Seat " << seatNo << " in Row " << (row + 1) << " is already booked or invalid.\n";
            return;
        }

        
        if (temp->prev)
            temp->prev->next = temp->next;
        else
            head[row] = temp->next;  

        if (temp->next)
            temp->next->prev = temp->prev;

        delete temp;
        cout << "Seat " << seatNo << " in Row " << (row + 1) << " booked successfully!\n";
    }

    
    void userBooking() {
        int row, seat;
        cout << "\nEnter Row (1-10): ";
        cin >> row;
        cout << "Enter Seat Number (1-7): ";
        cin >> seat;
        bookSeat(row, seat);
    }
};

int main() {
    Cinemax cinema;
    cinema.initialBooking();

    int choice;
    do {
        cout << "\n--- CINEMAX TICKET BOOKING SYSTEM ---\n";
        cout << "1. Show Available Seats\n";
        cout << "2. Book a Seat\n";
        cout << "3. Exit\n";
        cout << "Enter your choice: ";
        cin >> choice;

        switch (choice) {
            case 1:
                cinema.displaySeats();
                break;
            case 2:
                cinema.userBooking();
                break;
            case 3:
                cout << "Thank you for using the system.\n";
                break;
            default:
                cout << "Invalid choice!\n";
        }
    } while (choice != 3);

    return 0;

}





âš™ï¸ Main Logic Overview

Node Structure

Represents a single seat.

Contains:

seatNo: seat number in that row

next: pointer to next seat

prev: pointer to previous seat

Cinemax Class

head[10]: Array of pointers â†’ one linked list (row) for each of 10 rows.

Contains all main operations like create, display, and book seats.

ðŸ§© Functions Explained
1. createSeats()

Creates 10 rows, each with 7 seats (1â€“7).

Links each seat both forward and backward (doubly linked list).

So you can easily traverse and delete (book) a seat.

2. initialBooking()

Automatically books a few seats at the start (e.g., Row 1 Seat 3, Row 2 Seat 5).

It does this by calling bookSeat() directly.

3. displaySeats()

Displays all available (unbooked) seats in every row.

If a seat is booked, it is removed from the linked list, so only free ones are shown.

4. bookSeat(int row, int seatNo)

Searches for the specific seat in the selected row.

If found â†’ deletes that node (marks seat as booked).

Adjusts links so the list remains connected properly.

If not found â†’ seat is already booked or invalid.

5. userBooking()

Allows the user to enter a row number (1â€“10) and seat number (1â€“7).

Calls bookSeat() to reserve it.

ðŸ–¥ï¸ main() Logic

Creates a Cinemax object â†’ automatically creates all seats.

Calls initialBooking() â†’ some seats are pre-booked.

Displays a menu with options:

1ï¸âƒ£ Show Available Seats

2ï¸âƒ£ Book a Seat

3ï¸âƒ£ Exit

Loops until user chooses Exit.

â±ï¸ Time Complexity
Operation	Complexity
Create Seats	O(10Ã—7) = O(1)
Book Seat	O(7) per row = O(1)
Display Seats	O(10Ã—7) = O(1)
