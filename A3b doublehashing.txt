#include <iostream>
#include <string>
using namespace std;

const int SIZE = 10;

struct Client {
    string name;
    long long phone;
    bool occupied;
};


int hashFunction1(string name) {
    int sum = 0;
    for (int i = 0; i < name.length(); i++)
        sum += name[i];
    return sum % SIZE;
}


int hashFunction2(string name) {
    int sum = 0;
    for (int i = 0; i < name.length(); i++)
        sum += name[i];
    return 7 - (sum % 7);  // 7 < SIZE and prime number
}


void insert(Client table[]) {
    string name;
    long long phone;
    cout << "Enter client name: ";
    cin >> name;
    cout << "Enter phone number: ";
    cin >> phone;

    int index1 = hashFunction1(name);
    int index2 = hashFunction2(name);
    int i = 0;
    int index = (index1 + i * index2) % SIZE;

   
    while (table[index].occupied && i < SIZE) {
        i++;
        index = (index1 + i * index2) % SIZE;
    }

    if (i == SIZE) {
        cout << "Hash table is full!" << endl;
        return;
    }

    table[index].name = name;
    table[index].phone = phone;
    table[index].occupied = true;

    cout << "Client inserted at index " << index << endl;
}


void search(Client table[]) {
    string name;
    cout << "Enter client name to search: ";
    cin >> name;

    int index1 = hashFunction1(name);
    int index2 = hashFunction2(name);
    int i = 0;
    int index = (index1 + i * index2) % SIZE;

    while (table[index].occupied && i < SIZE) {
        if (table[index].name == name) {
            cout << "Client found! Phone: " << table[index].phone << endl;
            return;
        }
        i++;
        index = (index1 + i * index2) % SIZE;
    }

    cout << "Client not found!" << endl;
}


void display(Client table[]) {
    cout << "\n--- Hash Table ---\n";
    for (int i = 0; i < SIZE; i++) {
        cout << i << " : ";
        if (table[i].occupied)
            cout << table[i].name << " - " << table[i].phone;
        else
            cout << "Empty";
        cout << endl;
    }
}


int main() {
    Client table[SIZE];
    for (int i = 0; i < SIZE; i++)
        table[i].occupied = false;

    int choice;
    do {
        cout << "\n--- MENU ---\n";
        cout << "1. Insert Client\n2. Search Client\n3. Display Table\n4. Exit\n";
        cout << "Enter your choice: ";
        cin >> choice;

        switch (choice) {
            case 1: insert(table); break;
            case 2: search(table); break;
            case 3: display(table); break;
            case 4: cout << "Exiting program..." << endl; break;
            default: cout << "Invalid choice!" << endl;
        }
    } while (choice != 4);

    return 0;
}

